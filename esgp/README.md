# CAIL 2024 二审改判类案检索与改判原因预测

## 任务介绍

该赛道由**武汉大学信息管理学院**承办。

依法改判是二审裁定的重要表现方式之一，它不仅是贯彻两审终审原则的具体体现，也是“有错必纠”原则的体现，对于查明案件事实、维护实体公正、实现程序正义有着重要的作用。类案检索作为人工智能支持司法审判的重要内容，对于提升法院整体裁判水平、实现类案适法统一、促进司法公正有极其重要的积极意义。本赛道面向民事案件的二审改判情境，包括改判类案检索与改判原因预测两个子任务。具体如下：

- **类案检索**：给定若干查询案例（一审案例），要求对每一个查询案例从候选案例池（一审-二审案例对）中筛选出与查询案例相关的类案。
- **原因预测**：在第一个子任务的基础上，要求对每一个查询案例生成在二审中可能改判的原因或维持原判的相关陈述。

## 数据介绍

本任务所使用的训练集以及测试集均来自中国裁判文书网，其中初赛阶段包含50个查询案例和总数为9192组（一审-二审案例对）的候选案例池，涉及比较常见的15个民事案由；封闭评测阶段将使用不公开的数据进行评测，数据结构、数据类型与初赛阶段、复赛阶段类似。

##  评价方式

1. 类案检索任务：评测指标为**NDCG@5**，也即结果列表前5位候选案例的NDCG（Normalized Discounted Cumulative Gain）值；

2. 原因预测任务：评测指标为**ROUGE**（Recall-Oriented Understudy for Gisting Evaluation），将生成原因与参考原因进行比较, 其中ROUGE-1、ROUGE-2、ROUGE-L分别衡量unigram、bigram、LCS匹配情况，三者都只采用F-score。ROUGE总分计算方式为：ROUGE = 0.3 * ROUGE-1 + 0.3 * ROUGE-2 + 0.4 * ROUGE-L。

3. 两个任务的综合分数为两个任务的分数相乘。

## 基线系统

（1）类案检索任务，我们将提供基于BM25的基线模型；

（2）原因预测任务，我们从检索排序第一的类案中提取二审文书最后的本院认为段落的“综述”部分作为输出的原因。

## 初赛和复赛阶段结果提交格式

本次比赛只需要提交评测结果文件，命名为result.jsonl，每行对应一个查询案例，包含如下字段：qid（查询标识符）、cases（TOP5候选案例组对应的编号列表）、reason（二审中可能改判或维持原判的原因陈述）。下面是一个result.jsonl的示例（仅供示意）：

```json
{"qid": "1", "cases": ["12", "7", "87", "38", "134"], "reason": "本院认为，东亚银行重庆分行与恒大君鑫公司签订的《重庆市预购商品房抵押合同》合法有效。该合同约定，在领取《房屋所有权证》之前，如陈秀金不按期清偿债务，恒大君鑫公司保证代陈秀金履行该项义务。本院认为，上述约定表明了在陈秀金不按期清偿债务，而非是陈秀金不能偿还借款的情形下，恒大君鑫公司承担偿还借款的保证责任。根据担保法的有关规定，恒大君鑫公司提供的保证系连带保证。原审法院适用法律有误。东亚银行重庆分行的上诉请求成立，本院予以支持。"}
{"qid": "2", "cases": ["99", "30", "74", "42", "4"], "reason": "驳回上诉，维持原判。"}

```

注意：由于类案检索任务的评测指标是NDCG@5，所以"cases"下对应的列表长度至少为5。改判原因预测任务中，如果认为二审维持原判，请将预测原因输入为"驳回上诉，维持原判。"。提交格式的错误将会直接影响评测结果！

## 封测阶段结果提交格式

在【二审改判类案检索与改判原因预测】的封测阶段，采用了“服务-请求”方案进行评估。参赛选手需要在本地搭建服务器。为了缓减调用过程中的网络负载，赛事选手需要使用复赛阶段提供的数据集（fusai_cases.json）作为类案检索任务的案例池进行本地化部署，评测过程中仅提供封测阶段的queries。评测方会通过“访问服务”的方式获取类案检索与原因预测结果。参赛选手所提供的服务须符合以下接口规范要求：

- 参赛者需要提供一个API的URL或域名，以便评测过程中能够访问服务。例如：https://api.example.com/model.
- HTTP方法： API应当支持POST请求方法。
- 请求参数： API应接受一个JSON请求体，示例输入如下：

```json
{
    "id": "1",
    "anyou": "劳务合同纠纷",
    "yishen_anhao": "（2016）苏0106民初4599号",
    "yishen_content": "\n\n江苏省南京市鼓楼区人民法院\n\n民事判决书\n\n..."
}
```

- 响应格式： API应当返回一个JSON响应，示例输出如下：

```json
{
    "qid": "1",
    "cases": ["12", "7", "87", "38", "134"], 
    "reason": "本院认为，东亚银行重庆分行与恒大君鑫公司签订的..."
    #如果维持原判，reason字段应为"驳回上诉，维持原判。"
}
```

- 状态码： 正常情况下，请使用HTTP状态码200表示成功响应
  调用代码示例:

```python
import requests
api_url = "https://api.example.com/model"

input_data = {
    "id": "1",
    "anyou": "劳务合同纠纷",
    "yishen_anhao": "（2016）苏0106民初4599号",
    "yishen_content": "\n\n江苏省南京市鼓楼区人民法院\n\n民事判决书\n\n..."
}

response = requests.post(api_url, json=input_data)

result = response.json()
print("模型处理结果:", result)
```

请在**2024.11.16 - 2024.11.24**准备并测试您的API，我们将在**2024.11.25**开始正式评测。

**封测阶段模型接口提交格式说明**
请参赛选手先将api信息按照下述json格式填写，再将json文件压缩成zip文件进行提交。评测方在提交过程中会根据选手提交的api的url进行一次简单的调用，用于判断其返回格式是否为上述响应格式，格式正确则提交成功，返回“https://api.example.com/model 已提交，后续评测中”信息，否则提交失败，请仔细检查本地部署情况，重新提交。

```json
{"url": "https://api.example.com/model"}
```
注意：
- 1.在提交过程中，api需要保持开启状态，
- 2.api提交截止时间为**2024.11.26中午12:00**。
- 3.为降低选手部署模型的成本，评测方将在api提交截止后进行调用来测试模型，预计在**2024.11.27下午18:00**前完成，后续选手可以关闭api避免不必要的花销。

请确保测试期间（**2024.11.26下午13：00-2024.11.27下午18:00**）您的api具备稳定性和可靠性，以便在测试时能够正常访问和使用。


## 赛程赛制

- **2024.09.13 - 2024.11.15**，初赛阶段。
- **2024.10.28 - 2024.11.15**，复赛阶段。
- **2024.11.16 - 2024.11.30**，封测阶段（暂定）。

1. 初赛阶段：开启本任务比赛报名，提供小规模数据集，用于编写模型进行训练和测试，选手需在小规模数据上表现超过官方baseline，才能进入复赛。
2. 复赛阶段：开放第二阶段测试。对于高于任务预设基准算法成绩的队伍，我们将提供全量数据并开放第二阶段的测试提交。
3. 封测阶段：封闭评测。第二阶段结束时，所有参赛者需要提交模型调用接口，由评测方在封闭的新测试集上进行测试。
